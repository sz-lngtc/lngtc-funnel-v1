# Longetic Funnel — WEB to App воронка

Воронка для продукту превентивної медицини **Longetic**: анкета з 26 питань для визначення **Energy Level / Longevity Score**. Mobile-first веб-інтерфейс.

## Структура

- **26 питань** — кожне питання на окремій сторінці
- **6 секцій** з перебивками між ними:
  1. Сон та відновлення (5 питань)
  2. Харчування (4 питання)
  3. Рухова активність (5 питань)
  4. Стрес та відпочинок (4 питання)
  5. Соціальне життя та цілі (4 питання)
  6. Здоров’я та звички (4 питання)

Після кожної секції — екран-перебивка «Секція завершена», далі — наступний блок.

## Запуск

```bash
npm install
npm run dev
```

Відкрити в браузері: `http://localhost:5173`

Збірка: `npm run build`. Перегляд збірки: `npm run preview`.

### Збереження даних (без публікації в GitHub)

- **Бекенд** зберігає відповіді та скор у `server/data/submissions.json`.
- **Секрети та дані не потрапляють у репозиторій**: у `.gitignore` додано `.env`, `.env.local`, `server/data/`. Ніколи не комітьте `.env` або вміст `server/data/`.
- Запуск API: `npm run server` (порт змінною `PORT` у `.env`, за замовчуванням 3001). Для розробки Vite проксує `/api` на бекенд.
- Приклад конфігурації: скопіюйте `.env.example` у `.env` і при потребі змініть `PORT`.

### Деплой на Railway

Один сервіс віддає і фронт, і API.

1. Підключіть репозиторій у [Railway](https://railway.com/), створіть сервіс з кореня проєкту.
2. **Build Command:** `npm run build` (або залишити порожнім — скрипт `start` сам викликає build).
3. **Start Command:** `npm start` (збирає фронт і запускає Express на `PORT`; Railway підставить `PORT` автоматично).
4. **Збереження submission'ів:** файлова система контейнера ephemeral — після redeploy дані зникають. Щоб зберігати їх постійно, у Railway додайте **Volume** і змонтуйте його в директорію `server/data` (шлях у сервісі), або зберігайте дані в БД (наприклад Railway Postgres).
5. Змінна `VITE_API_BASE` не потрібна — фронт і API на одному домені.

## Технології

- React 18 + Vite
- React Router 6
- CSS Modules, mobile-first (max-width 480px, safe-area)

## Редагування питань

Питання та секції описані в `src/data/questions.js`. Типи питань:

- `scale5` / `scale7` — шкала 1–5 або 1–7
- `single` — один варіант з списку (з полем `score` для підрахунку)

Після зміни питань можна оновити розподіл по секціях у `SECTION_QUESTION_COUNTS` і масиві `QUESTIONS`.
